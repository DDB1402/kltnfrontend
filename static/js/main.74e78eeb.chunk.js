(this["webpackJsonpapp-chat"]=this["webpackJsonpapp-chat"]||[]).push([[0],{162:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=162},340:function(e,t,a){},341:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),s=a.n(c),o=a(31),i=a(5),u=a(2),d=a(8),l=a(4),b="https://backendwebchat.herokuapp.com",O="/USER",p="/CONVERSATION",f="/NOTIFICATION",j="/CALL",g=200,v=0,_=1,S=2,y=4,E=-1,h=0,C=1,k=1,T={forceNew:!0,upgrade:!1,multiplex:!1,autoConnect:!1,transports:["websocket"]},x=a(57);Object(x.a)(b,Object(u.a)(Object(u.a)({},T),{},{autoConnect:!0})),Object(x.a)("".concat(b).concat(O),T),Object(x.a)("".concat(b).concat(p),T),Object(x.a)("".concat(b).concat(f),T),Object(x.a)("".concat(b).concat(j),Object(u.a)({},T)),a(14),a(101);function m(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function R(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}function I(e){var t=e.split(".")[1];if(!t)return null;var a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var A,w,L=a(7),N=a(23),U=a(19),F=Object(N.createActions)({setConversationSocketReady:["payload"],setNotificationSocketReady:["payload"],setUserSocketReady:["payload"]}),D=F.Types,G=(F.Creators,Object(U.a)((function(e){return e.socket}),(function(e){return e.socketReadyFlags}))),M=(Object(U.a)(G,(function(e){var t=Object(u.a)({},e);return Object.keys(e).forEach((function(e){t[e]||delete t[e]})),Object.keys(e).length===Object.keys(t).length})),Object(N.createReducer)({socketReadyFlags:{conversation:!1,notification:!1,user:!1}},(A={},Object(L.a)(A,D.SET_CONVERSATION_SOCKET_READY,(function(e){return Object(u.a)(Object(u.a)({},e),{},{socketReadyFlags:Object(u.a)(Object(u.a)({},e.socketReadyFlags),{},{conversation:!0})})})),Object(L.a)(A,D.SET_NOTIFICATION_SOCKET_READY,(function(e){return Object(u.a)(Object(u.a)({},e),{},{socketReadyFlags:Object(u.a)(Object(u.a)({},e.socketReadyFlags),{},{notification:!0})})})),Object(L.a)(A,D.SET_USER_SOCKET_READY,(function(e){return Object(u.a)(Object(u.a)({},e),{},{socketReadyFlags:Object(u.a)(Object(u.a)({},e.socketReadyFlags),{},{user:!0})})})),A))),P=Object(N.createActions)({setLoading:["payload"],notificationSuccess:["payload"],notificationFailed:["payload"],notificationWarning:["payload"]}),q=P.Types,B=P.Creators,V=function(e){return e.ui},Y=(Object(U.a)(V,(function(e){return e.notification})),Object(U.a)(V,(function(e){return e.isLoading})),Object(N.createReducer)({isLoading:!1,notification:null},(w={},Object(L.a)(w,q.SET_LOADING,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{isLoading:a})})),Object(L.a)(w,q.NOTIFICATION_SUCCESS,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{notification:{status:"success",message:a.message,time:Date.now()}})})),Object(L.a)(w,q.NOTIFICATION_FAILED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{notification:{status:"error",message:a.message,time:Date.now()}})})),Object(L.a)(w,q.NOTIFICATION_WARNING,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{notification:{status:"warning",message:a.message,time:Date.now()}})})),w))),K=a(18);a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;a.p;var W=a(1);var H,Q,z=Object(N.createActions)({getConversation:null,getConversationSucceed:["payload"],getSpecificConversation:["payload"],getSpecificConversationSucceed:["payload"],addUserToConversation:["payload"],addUserToConversationSucceed:["payload"],onUserAdd:["payload"],onAddedToConversation:["payload"],setConversationLoading:["payload"],setCurrentConversation:["payload"],createGroupChat:["payload"],updateLastMessage:["payload"]}),J=z.Types,X=z.Creators,Z=function(e){return e.conversation},$=(Object(U.a)(Z,(function(e){return e.listConversation})),Object(U.a)(Z,(function(e){return e.mainConversationInfo})),Object(U.a)(Z,(function(e){return e.isLoading})),Object(U.a)(Z,(function(e){return!e.listConversation})),function(e,t){t.payload;return e}),ee=J,te=X,ae=Object(N.createReducer)({listConversation:[],mainConversationInfo:null,isLoading:!1,currentConversation:null},(H={},Object(L.a)(H,J.GET_CONVERSATION_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{listConversation:a.data})})),Object(L.a)(H,J.GET_SPECIFIC_CONVERSATION_SUCCEED,(function(e,t){var a,n,r=t.payload;return Object(u.a)(Object(u.a)({},e),{},{mainConversationInfo:r.data,currentConversation:(null===(a=r.data)||void 0===a||null===(n=a.conversationInfo)||void 0===n?void 0:n.id_room)||null})})),Object(L.a)(H,J.SET_CONVERSATION_LOADING,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{isLoading:a})})),Object(L.a)(H,J.SET_CURRENT_CONVERSATION,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{currentConversation:a.id_room})})),Object(L.a)(H,J.ADD_USER_TO_CONVERSATION,$),Object(L.a)(H,J.ADD_USER_TO_CONVERSATION_SUCCEED,$),Object(L.a)(H,J.ON_USER_ADD,(function(e,t){var a,n=t.payload;return(null===(a=e.currentConversation)||void 0===a?void 0:a.toString())!==n.id_room.toString()?e:Object(u.a)(Object(u.a)({},e),{},{mainConversationInfo:Object(u.a)(Object(u.a)({},e.mainConversationInfo),{},{listUser:[].concat(Object(d.a)(e.mainConversationInfo.listUser),Object(d.a)(n.listUser))})})})),Object(L.a)(H,J.ON_ADDED_TO_CONVERSATION,(function(e,t){var a=t.payload,n=e.listConversation.reverse();return n.push(a.newConversation),Object(u.a)(Object(u.a)({},e),{},{listConversation:n.reverse()})})),Object(L.a)(H,J.CREATE_GROUP_CHAT,(function(e,t){return e})),Object(L.a)(H,J.UPDATE_LAST_MESSAGE,(function(e,t){var a=t.payload.data,n=Object(d.a)(e.listConversation);return n=n.map((function(e){var t,n;return(null===e||void 0===e||null===(t=e.id_room)||void 0===t?void 0:t.toString())===(null===a||void 0===a||null===(n=a.id_conversation)||void 0===n?void 0:n.toString())?Object(u.a)(Object(u.a)({},e),{},{message_count:parseInt(e.message_count)+1,last_message_type:a._type,last_message:a._type===S||a._type===_?"\u1ea2nh m\u1edbi":a.content}):e})),Object(u.a)(Object(u.a)({},e),{},{listConversation:n})})),H)),ne=Object(N.createActions)({getListFriend:null,getListFriendSucceed:["payload"],searchUser:["payload"],searchUserSucceed:["payload"],sendRequestAddFriend:["payload"],sendRequestAddFriendSucceed:["payload"],setUserLoading:["payload"]}),re=ne.Types,ce=ne.Creators,se=function(e){return e.user},oe=(Object(U.a)(se,(function(e){return e.listFriend})),Object(U.a)(se,(function(e){return e.searchUserResult})),re),ie=ce,ue=Object(N.createReducer)({listFriend:null,searchUserResult:null,isUserLoading:!1},(Q={},Object(L.a)(Q,re.GET_LIST_FRIEND_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{listFriend:a.listFriend})})),Object(L.a)(Q,re.SEARCH_USER_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{searchUserResult:a.result})})),Object(L.a)(Q,re.SEND_REQUEST_ADD_FRIEND_SUCCEED,(function(e,t){var a=t.payload,n=e.searchUserResult.map((function(e){return e.id_user===a&&(e.can_make_friend_request=0,e.friendStatus=0),e}));return Object(u.a)(Object(u.a)({},e),{},{searchUserResult:n})})),Object(L.a)(Q,re.SET_USER_LOADING,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{isLoading:a})})),Q)),de=a(45),le=["title","children"],be=function(e){var t=e.title,a=e.children;Object(K.a)(e,le);return document.title=t,Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),a};be.propTypes={title:a.n(de).a.string.isRequired};a.p,a.p,a(25);var Oe,pe,fe,je=a(342),ge=Object(N.createActions)({loginRequest:["payload"],loginSucceed:["payload"],loginFailed:["payload"],relogin:["payload"],reloginSucceed:["payload"],signOut:["payload"],editUser:["payload"],editUserSucceed:["payload"],editUserFailed:["payload"]}),ve=ge.Types,_e=ge.Creators,Se={user:null,accessToken:null,refreshToken:null,error:null},ye=function(e){return e.auth},Ee=Object(U.a)(ye,(function(e){return e.accessToken})),he=(Object(U.a)(ye,(function(e){return e.refreshToken})),Object(U.a)(ye,(function(e){return e.user})),Object(U.a)(ye,(function(e){return e.error})),Object(U.a)(Ee,(function(e){if(e){var t=I(e),a=Date.now();return 1e3*t.exp>a}return!1})),ve),Ce=_e,ke=Object(N.createReducer)(Se,(Oe={},Object(L.a)(Oe,he.LOGIN_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{user:I(a.accessToken),error:null,accessToken:a.accessToken,refreshToken:a.refreshToken})})),Object(L.a)(Oe,he.LOGIN_FAILED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{error:401===a.status?"Email ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang!":"Connect failed!"})})),Object(L.a)(Oe,he.RELOGIN_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{user:I(a.accessToken),error:null,accessToken:a.accessToken,refreshToken:R("cn11_refresh_token")})})),Object(L.a)(Oe,he.SIGN_OUT,(function(e){return m("cn11_refresh_token",null,0),m("cn11_access_token",null,0),Object(u.a)({},Se)})),Object(L.a)(Oe,he.EDIT_USER_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{error:null,user:a.data})})),Object(L.a)(Oe,he.EDIT_USER_FAILED,(function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Some thing went wrong! Connect failed?"})})),Oe)),Te=Object(N.createActions)({getMessages:["payload"],getMessagesSucceed:["payload"],insertPreviewMessages:["payload"],insertListenMessages:["payload"],sendMessage:["payload"],sendMessageSucceed:["payload"],sendMessageFailed:["payload"],continueGetMessage:["payload"],continueGetMessageSucceed:["payload"],continueGetMessageFailed:["payload"]}),xe=Te.Types,me=Te.Creators,Re=function(e){return e.message},Ie=(Object(U.a)(Re,(function(e){for(var t,a,n=[],r=0,c=Object.entries(e.previewMessages);r<c.length;r++){var s=Object(l.a)(c[r],2),o=(s[0],s[1]);n.push(o)}return!(a=(t=e.messages).concat.apply(t,n))||a.length<1?[]:a.sort((function(e,t){return new Date(e.message_create_at)-new Date(t.message_create_at)})).reduce((function(e,t){var a,n,r=e.at(-1);return r&&+t.id_user===r.idUser?(r.messages.push({_type:+t._type,idMessage:+t.id_message,content:t.content,url:t.url,icon:t.icon,status:null!==(a=t.status)&&void 0!==a?a:C}),r.createAt=t.message_create_at):e.push({idUser:+t.id_user,avatar:t.avatar,gender:+t.sex,messages:[{_type:+t._type,idMessage:+t.id_message,content:t.content,url:t.url,icon:t.icon,status:null!==(n=t.status)&&void 0!==n?n:C}],createAt:t.message_create_at}),e}),[])})),Object(U.a)(Re,(function(e){return e.messages})),Object(U.a)(Re,(function(e){return e.messages.length>0?e.messages[0]:null})),Object(U.a)(Re,(function(e){return e.offset})),Object(U.a)(Re,(function(e){return e.total})),Object(U.a)(Re,(function(e){return e.continueLoadMessageStatus})),xe),Ae=me,we=Object(N.createReducer)({messages:[],previewMessages:[],error:null,status:"idle",continueLoadMessageStatus:"idle",offset:0,total:0},(pe={},Object(L.a)(pe,xe.GET_MESSAGES_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{messages:a.data,total:a.total,offset:a.offset})})),Object(L.a)(pe,xe.CONTINUE_GET_MESSAGE,(function(e,t){t.payload;return Object(u.a)(Object(u.a)({},e),{},{continueLoadMessageStatus:"loading"})})),Object(L.a)(pe,xe.CONTINUE_GET_MESSAGE_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),Object(d.a)(a.data)),total:a.total,offset:a.offset,continueLoadMessageStatus:"fulfilled"})})),Object(L.a)(pe,xe.CONTINUE_GET_MESSAGE_FAILED,(function(e,t){t.payload;return Object(u.a)(Object(u.a)({},e),{},{continueLoadMessageStatus:"failed"})})),Object(L.a)(pe,xe.INSERT_PREVIEW_MESSAGES,(function(e,t){var a=t.payload,n=[];a._type===v&&n.push({_type:a._type,id_user:a.idUser,avatar:a.avatar,sex:a.sex,content:a.content,url:a.listImages,message_create_at:Date.now(),id_message:Object(je.a)(),status:h}),a._type===_&&a.listImages.forEach((function(e){n.push({_type:a._type,id_user:a.idUser,avatar:a.avatar,sex:a.sex,content:a.content,url:e,message_create_at:Date.now(),id_message:Object(je.a)(),status:h})})),a._type===y&&(n.push({_type:v,id_user:a.idUser,avatar:a.avatar,sex:a.sex,content:a.content,url:null,message_create_at:Date.now(),id_message:Object(je.a)(),status:h}),a.listImages.forEach((function(e){n.push({_type:_,id_user:a.idUser,avatar:a.avatar,sex:a.sex,content:null,url:e,message_create_at:Date.now(),id_message:Object(je.a)(),status:h})}))),a.type===S&&n.push({_type:S,id_user:a.idUser,avatar:a.avatar,sex:a.sex,content:a.content,icon:a.icon,url:null,message_create_at:Date.now(),id_message:Object(je.a)(),status:h});var r=e.previewMessages;return r[a.idPreview]=n,Object(u.a)(Object(u.a)({},e),{},{previewMessages:r})})),Object(L.a)(pe,xe.INSERT_LISTEN_MESSAGES,(function(e,t){var a=t.payload;return Array.isArray(a.data)?e.messages=[].concat(Object(d.a)(e.messages),Object(d.a)(a.data)):e.messages.push(a.data),Object(u.a)(Object(u.a)({},e),{},{messages:Object(d.a)(e.messages),total:Array.isArray(a.data)?e.total+a.data.length:e.total+1})})),Object(L.a)(pe,xe.SEND_MESSAGE_SUCCEED,(function(e,t){var a=t.payload,n=e.messages,r=a.data,c=a.id_preview||a.data.id_preview;return Array.isArray(r)?r.forEach((function(e){return n.push(e)})):n.push(r),delete e.previewMessages[c],Object(u.a)(Object(u.a)({},e),{},{messages:n,previewMessages:Object(u.a)({},e.previewMessages)})})),Object(L.a)(pe,xe.SEND_MESSAGE_FAILED,(function(e,t){var a,n=t.payload,r=e.previewMessages[n];return r.map((function(e){return e.status=E})),(a=e.messages).push.apply(a,Object(d.a)(r)),delete e.previewMessages[n],Object(u.a)(Object(u.a)({},e),{},{messages:Object(d.a)(e.messages),previewMessages:Object(d.a)(e.previewMessages)})})),pe)),Le=(a(46),Object(N.createActions)({getListStickerCategory:["payload"],getListStickerCategorySucceed:["payload"],getListStickerCategoryFail:["payload"],getListStickerByCategory:["payload"],getListStickerByCategorySucceed:["payload"],getListStickerByCategoryFail:["payload"]})),Ne=Le.Types,Ue=Le.Creators,Fe=Ne,De=function(e){return e.sticker},Ge=(Object(U.a)(De,(function(e){return e.listStickerCategoryLoading})),Object(U.a)(De,(function(e){return e.listStickerLoading})),Object(U.a)(De,(function(e){return e.listStickerCategory})),Object(N.createReducer)({listSticker:{},listStickerCategory:[],listStickerCategoryLoading:"idle",listStickerLoading:"idle"},(fe={},Object(L.a)(fe,Fe.GET_LIST_STICKER_CATEGORY_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{listStickerCategoryLoading:"fulfilled",listStickerCategory:a.data})})),Object(L.a)(fe,Fe.GET_LIST_STICKER_CATEGORY_FAIL,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{listStickerCategoryLoading:"failed"})})),Object(L.a)(fe,Fe.GET_LIST_STICKER_BY_CATEGORY,(function(e){return Object(u.a)(Object(u.a)({},e),{},{listStickerLoading:"idle"})})),Object(L.a)(fe,Fe.GET_LIST_STICKER_BY_CATEGORY_SUCCEED,(function(e,t){var a=t.payload,n=a.data,r=a.id_category,c=e.listSticker;return c[r]=n.data,Object(u.a)(Object(u.a)({},e),{},{listStickerLoading:"fulfilled",listSticker:c})})),Object(L.a)(fe,Fe.GET_LIST_STICKER_BY_CATEGORY_FAIL,(function(e,t){t.payload;return Object(u.a)(Object(u.a)({},e),{},{listStickerLoading:"failed"})})),fe)));a(56),a(26),a(29);var Me,Pe=Object(N.createActions)({getAllNotification:["payload"],getAllNotificationSucceed:["payload"],answerFriendRequest:["payload"],answerFriendRequestSucceed:["payload"],addNewNotification:["payload"]}),qe=Pe.Types,Be=Pe.Creators,Ve=qe,Ye=Be,Ke=Object(N.createReducer)({notification:null},(Me={},Object(L.a)(Me,qe.GET_ALL_NOTIFICATION_SUCCEED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{notification:a.data})})),Object(L.a)(Me,qe.ANSWER_FRIEND_REQUEST_SUCCEED,(function(e,t){var a=t.payload;console.log("\ud83d\ude80 ~ payload",a);var n=e.notification.map((function(e){return e.id_notification===a&&(e.status=k),e}));return Object(u.a)(Object(u.a)({},e),{},{notification:n})})),Object(L.a)(Me,qe.ADD_NEW_NOTIFICATION,(function(e,t){var a=t.payload,n=e.notification.reverse();return n.push(a.newNotification),console.log("\ud83d\ude80 ~ newNotification",n.reverse()),Object(u.a)(Object(u.a)({},e),{},{notification:n})})),Me));a.p,a.p,a(104),a(320);var We,He=Object(N.createActions)({signup:["payload"],signupSuccess:["payload"],signupFailed:["payload"]}),Qe=He.Types,ze=He.Creators,Je=Qe,Xe=Object(N.createReducer)({error:null},(We={},Object(L.a)(We,Qe.SIGNUP_SUCCESS,(function(e){return Object(u.a)(Object(u.a)({},e),{},{error:null})})),Object(L.a)(We,Qe.SIGNUP_FAILED,(function(e,t){var a=t.payload;return Object(u.a)(Object(u.a)({},e),{},{error:400===a.status?"T\xe0i kho\u1ea3n \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng!":"Something went wrong...!"})})),We));var Ze=a(81),$e=a.n(Ze);$e.a.create({baseURL:"https://backendwebchat.herokuapp.com",responseType:"json",timeout:1e5});var et=function(){return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{children:"Hello"})})},tt=(a(340),a(48)),at=a(150),nt=a(149),rt=Object(tt.combineReducers)({auth:ke,ui:Y,signup:Xe,user:ue,conversation:ae,message:we,socket:M,sticker:Ge,notification:Ke}),ct=a(6),st=a.n(ct),ot=a(9),it=a(27),ut=$e.a.create({baseURL:b,responseType:"json",timeout:1e5});ut.interceptors.request.use((function(e){var t="Bearer "+(R("cn11_access_token")||null);return e.headers.Authorization=t,e})),ut.interceptors.response.use((function(e){return-1!==["authen/login","authen/re_login"].indexOf(e.config.url)&&dt(e.data),"authen/signup"===e.config.url&&(ut.defaults.headers.Authorization="Bearer "+e.data.accessToken,m("cn11_refresh_token",e.data.accessToken,100),m("cn11_access_token",e.data.refreshToken,100)),e}),function(){var e=Object(it.a)(st.a.mark((function e(t){var a,n,r,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,n=t.response,a.retries_times=(t.config.retries_times||0)+1,!n||401!==n.status||"authen/refresh_token"===a.url){e.next=25;break}if(!(a.retries_times<=2)){e.next=25;break}return e.prev=5,e.next=8,ut.post("authen/refresh_token",{refresh_token:R("cn11_refresh_token")});case 8:if(r=e.sent,dt(r.data),"authen/re_login"!==a.url){e.next=14;break}return e.abrupt("return",r);case 14:return e.next=16,ut(a);case 16:return c=e.sent,e.abrupt("return",c);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(5),m("cn11_refresh_token",null,0),m("cn11_access_token",null,0),e.abrupt("return",Promise.reject(t));case 25:return e.abrupt("return",Promise.reject(t));case 26:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}());var dt=function(e){ut.defaults.headers.Authorization="Bearer "+e.accessToken,m("cn11_refresh_token",e.refreshToken||R("cn11_refresh_token"),100),m("cn11_access_token",e.accessToken,100)},lt=function(){var e=Object(it.a)(st.a.mark((function e(){var t,a,n,r=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,a=ut.defaults.headers,n={},t&&(n=Object(u.a)(Object(u.a)({},a),t)),e.abrupt("return",Object(u.a)(Object(u.a)({},a),{},{headers:n}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function bt(e){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(it.a)(st.a.mark((function e(t){var a,n,r,c=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},r=lt(n),e.abrupt("return",ut.get(t,a,{headers:r}));case 4:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function pt(e){return ft.apply(this,arguments)}function ft(){return ft=Object(it.a)(st.a.mark((function e(t){var a,n,r,c=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},r=lt(n),e.abrupt("return",ut.post(t,a,{headers:r}));case 4:case"end":return e.stop()}}),e)}))),ft.apply(this,arguments)}var jt=function(e){return pt("notification/insertNewFriendRequest",e)},gt=function(e){return bt("conversation/getSpecificConversation/".concat(e.id_conversation))},vt=function(e){return pt("conversation/addUsersToConversation",e)},_t=function(e){return pt("conversation/createGroupChat",e)},St=function(e){return pt("message/sendMessage",e)},yt=function(e){return bt("/message/getMessages?".concat(e.queryParams))},Et=function(e){return bt("/upload/getIconByCategory/".concat(e.id_category))},ht=function(e){return pt("notification/answerFriendRequest",e)},Ct={login:st.a.mark((function e(t){var a,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ot.d)(B.setLoading(!0));case 3:return e.next=5,Object(ot.b)((function(){return pt("authen/login",t.payload)}));case 5:if((a=e.sent).status!==g){e.next=11;break}return e.next=9,Object(ot.d)(Ce.loginSucceed(a.data));case 9:return e.next=11,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationSuccess({message:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!"}))]);case 11:e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),n=e.t0.response,e.next=18,Object(ot.d)(Ce.loginFailed({status:(null===n||void 0===n?void 0:n.status)||400}));case 18:return e.next=20,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationFailed({message:"\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i!"}))]);case 20:case"end":return e.stop()}}),e,null,[[0,13]])})),relogin:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ot.d)(B.setLoading(!0));case 3:return e.next=5,Object(ot.b)((function(){return pt("authen/re_login",t.payload||{})}));case 5:if((a=e.sent).status!==g){e.next=9;break}return e.next=9,Object(ot.a)([Object(ot.d)(Ce.reloginSucceed(a.data)),Object(ot.d)(B.setLoading(!1))]);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.handleNotificationWaring({message:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i!"}))]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})),signup:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ot.d)(B.setLoading(!0));case 3:return e.next=5,Object(ot.b)((function(){return pt("authen/signup",t.payload)}));case 5:if(e.sent.status!==g){e.next=11;break}return e.next=9,Object(ot.d)(ze.signupSuccess());case 9:return e.next=11,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationSuccess({message:"\u0110\u0103ng k\xed th\xe0nh c\xf4ng!"}))]);case 11:e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),a=e.t0.response,e.next=18,Object(ot.d)(ze.signupFailed({status:a.status}));case 18:return e.next=20,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationFailed({message:"\u0110\u0103ng k\xed th\u1ea5t b\u1ea1i!"}))]);case 20:case"end":return e.stop()}}),e,null,[[0,13]])})),editUser:st.a.mark((function e(t){var a,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ot.d)(B.setLoading(!0));case 3:return e.next=5,Object(ot.b)((function(){return pt("user/editUser",t.payload)}));case 5:if((a=e.sent).status!==g){e.next=11;break}return e.next=9,Object(ot.d)(Ce.editUserSucceed(a.data));case 9:return e.next=11,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationSuccess({message:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"}))]);case 11:e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),n=e.t0.response,e.next=18,Object(ot.d)(Ce.editUserFailed({status:n.status}));case 18:return e.next=20,Object(ot.a)([Object(ot.d)(B.setLoading(!1)),Object(ot.d)(B.notificationFailed({message:"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!"}))]);case 20:case"end":return e.stop()}}),e,null,[[0,13]])}))},kt=a(11),Tt=["callback"],xt={sendMessage:st.a.mark((function e(t){var a,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.b)((function(){return St(a.data)}));case 4:if((n=e.sent).status!==g){e.next=8;break}return e.next=8,Object(kt.d)(Ae.sendMessageSucceed(n.data));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(kt.d)(Ae.sendMessageFailed(a.idPreview));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),getMessages:st.a.mark((function e(t){var a,n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,n=new URLSearchParams(Object(u.a)({},a)),e.next=5,Object(kt.b)((function(){return yt({queryParams:n})}));case 5:if((r=e.sent).status!==g){e.next=9;break}return e.next=9,Object(kt.d)(Ae.getMessagesSucceed(r.data));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})),continueGetMessages:st.a.mark((function e(t){var a,n,r,c,s;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.callback,r=Object(K.a)(a,Tt),e.prev=2,c=new URLSearchParams(Object(u.a)({},r)),e.next=6,Object(kt.b)((function(){return yt({queryParams:c})}));case 6:if((s=e.sent).status!==g){e.next=11;break}return e.next=10,Object(kt.d)(Ae.continueGetMessageSucceed(s.data));case 10:n();case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),e.next=17,Object(kt.d)(Ae.continueGetMessageFailed());case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))},mt={getConversation:st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(kt.b)((function(){return bt("conversation/getConversations")}));case 3:if((t=e.sent).status!==g){e.next=7;break}return e.next=7,Object(kt.d)(te.getConversationSucceed(t.data));case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})),getSpecificConversation:st.a.mark((function e(t){var a,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.d)(te.setConversationLoading(!0));case 4:return e.next=6,Object(kt.b)((function(){return gt({id_conversation:a.id})}));case 6:if((n=e.sent).status!==g){e.next=14;break}return e.next=10,Object(kt.d)(te.getSpecificConversationSucceed(n));case 10:return e.next=12,Object(kt.b)(xt.getMessages,{payload:{offset:0,limit:10,id_conversation:n.data.conversationInfo.id_room}});case 12:return e.next=14,Object(kt.d)(te.setConversationLoading(!1));case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:case"end":return e.stop()}}),e,null,[[1,16]])})),addUsersToConversation:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.b)((function(){return vt(Object(u.a)({},a))}));case 4:if(e.sent.status!==g){e.next=8;break}return e.next=8,Object(kt.d)(B.notificationSuccess({message:"Th\xeam th\xe0nh c\xf4ng"}));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(kt.d)(B.notificationFailed({message:"Th\xeam th\u1ea5t b\u1ea1i"}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),createGroupChat:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.b)((function(){return _t(Object(u.a)({},a))}));case 4:if(e.sent.status!==g){e.next=8;break}return e.next=8,Object(kt.d)(B.notificationSuccess({message:"T\u1ea1o ph\xf2ng th\xe0nh c\xf4ng"}));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Object(kt.d)(B.notificationFailed({message:"T\u1ea1o ph\xf2ng th\u1ea5t b\u1ea1i"}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))},Rt={getListFriend:st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(kt.b)((function(){return bt("user/friendList")}));case 3:if((t=e.sent).status!==g){e.next=7;break}return e.next=7,Object(kt.d)(ie.getListFriendSucceed(t.data));case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})),searchUser:st.a.mark((function e(t){var a,n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.payload.keyword,n=new URLSearchParams({keyword:a}),e.next=5,Object(kt.b)((function(){return bt("user/searchUser?".concat({queryParams:n}.queryParams))}));case 5:if((r=e.sent).status!==g){e.next=9;break}return e.next=9,Object(kt.d)(ie.searchUserSucceed(r.data));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})),sendRequestAddFriend:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.d)(ie.setUserLoading(!0));case 4:return e.next=6,Object(kt.b)((function(){return jt(a.data)}));case 6:if(e.sent.status!==g){e.next=10;break}return e.next=10,Object(kt.a)([Object(kt.d)(ie.sendRequestAddFriendSucceed(a.idUser)),Object(kt.d)(ie.setUserLoading(!1))]);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])}))},It={getStickerCategory:st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(kt.b)((function(){return bt("/upload/getIconCategory")}));case 3:if((t=e.sent).status!==g){e.next=10;break}return console.log(t),e.next=8,Object(kt.d)(Ue.getListStickerCategorySucceed(t.data));case 8:e.next=12;break;case 10:return e.next=12,Object(kt.d)(Ue.getListStickerCategoryFail());case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),e.next=18,Object(kt.d)(Ue.getListStickerCategoryFail());case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),getStickerByCategory:st.a.mark((function e(t){var a,n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.e)((function(e){return e.sticker.listSticker}));case 4:if(!(n=e.sent)[a.id_category]){e.next=9;break}return e.next=8,Object(kt.d)(Ue.getListStickerByCategorySucceed({data:{data:n[a.id_category]},id_category:a.id_category}));case 8:return e.abrupt("return");case 9:return e.next=11,Object(kt.b)((function(){return Et({id_category:a.id_category})}));case 11:if((r=e.sent).status!==g){e.next=17;break}return e.next=15,Object(kt.d)(Ue.getListStickerByCategorySucceed({data:r.data,id_category:a.id_category}));case 15:e.next=19;break;case 17:return e.next=19,Object(kt.d)(Ue.getListStickerByCategoryFail());case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(1),e.next=25,Object(kt.d)(Ue.getListStickerByCategoryFail());case 25:case"end":return e.stop()}}),e,null,[[1,21]])}))},At={getAllNotification:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,e.prev=1,e.next=4,Object(kt.b)((function(){return bt("notification/getAllNotification")}));case 4:if((a=e.sent).status!==g){e.next=8;break}return e.next=8,Object(kt.d)(Ye.getAllNotificationSucceed(a.data));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})),answerFriendRequest:st.a.mark((function e(t){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,e.prev=1,e.next=4,Object(kt.b)((function(){return ht(a)}));case 4:if(e.sent.status!==g){e.next=8;break}return e.next=8,Object(kt.d)(Ye.answerFriendRequestSucceed(a.id_notification));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])}))},wt=st.a.mark(Lt);function Lt(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ot.a)([Object(ot.f)(he.LOGIN_REQUEST,Ct.login),Object(ot.f)(he.RELOGIN,Ct.relogin),Object(ot.f)(he.EDIT_USER,Ct.editUser),Object(ot.f)(he.EDIT_USER,Ct.editUser),Object(ot.f)(Je.SIGNUP,Ct.signup),Object(ot.f)(oe.GET_LIST_FRIEND,Rt.getListFriend),Object(ot.c)(500,oe.SEARCH_USER,Rt.searchUser),Object(ot.e)(oe.SEND_REQUEST_ADD_FRIEND,Rt.sendRequestAddFriend),Object(ot.f)(ee.GET_CONVERSATION,mt.getConversation),Object(ot.f)(ee.GET_SPECIFIC_CONVERSATION,mt.getSpecificConversation),Object(ot.f)(ee.ADD_USER_TO_CONVERSATION,mt.addUsersToConversation),Object(ot.f)(ee.CREATE_GROUP_CHAT,mt.createGroupChat),Object(ot.f)(Ie.GET_MESSAGES,xt.getMessages),Object(ot.e)(Ie.CONTINUE_GET_MESSAGE,xt.continueGetMessages),Object(ot.e)(Ie.SEND_MESSAGE,xt.sendMessage),Object(ot.f)(Fe.GET_LIST_STICKER_CATEGORY,It.getStickerCategory),Object(ot.f)(Fe.GET_LIST_STICKER_BY_CATEGORY,It.getStickerByCategory),Object(ot.f)(Ve.GET_ALL_NOTIFICATION,At.getAllNotification),Object(ot.f)(Ve.ANSWER_FRIEND_REQUEST,At.answerFriendRequest)]);case 2:case"end":return e.stop()}}),wt)}var Nt=Object(at.a)(),Ut=Object(tt.createStore)(rt,Object(nt.composeWithDevTools)(Object(tt.applyMiddleware)(Nt)));Nt.run(Lt),s.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(i.a,{store:Ut,children:Object(W.jsx)(o.a,{children:Object(W.jsx)(et,{})})})}),document.getElementById("root"))}},[[341,1,2]]]);
//# sourceMappingURL=main.74e78eeb.chunk.js.map